{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/ecommerce-project/frontend/pages/login.jsx"],"sourcesContent":["// Archivo: pages/login.jsx\r\n// Vista de inicio de sesión para administradores y personal.\r\n\"use client\"; // Necesario para usar hooks de estado\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useRouter } from 'next/router'; // CORREGIDO: Usando 'next/router' para la convención pages/\r\n\r\nconst LoginPage = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n    const { login, isLoggedIn } = useAuth();\r\n    const router = useRouter();\r\n    \r\n    // Si ya está logueado, redirigir a Home o Dashboard\r\n    if (isLoggedIn) {\r\n         // Si ya tiene sesión, redirigir a la página principal para evitar doble login\r\n         router.push('/');\r\n         return null; // No renderizar nada mientras redirige\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setMessage('');\r\n        setLoading(true);\r\n\r\n        const result = await login(email, password);\r\n        \r\n        setLoading(false);\r\n        setMessage(result.message);\r\n        \r\n        if (!result.success) {\r\n            // Limpiar mensaje después de 3 segundos si falla\r\n            setTimeout(() => setMessage(''), 3000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex justify-center items-center min-h-[calc(100vh-140px)] bg-gray-50 p-4\">\r\n            <div className=\"w-full max-w-md bg-white p-8 rounded-xl shadow-2xl border border-gray-100\">\r\n                <h2 className=\"text-3xl font-bold text-center text-indigo-700 mb-6\">Acceso de Personal y Administrador</h2>\r\n                <p className=\"text-center text-gray-500 mb-8\">\r\n                    Prueba Admin: <span className=\"font-semibold\">admin@ecommerce.com / password123</span>\r\n                    <br/>\r\n                    Prueba Usuario: <span className=\"font-semibold\">staff@ecommerce.com / password456</span>\r\n                </p>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            required\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150\"\r\n                            placeholder=\"tucorreo@empresa.com\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Contraseña</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            required\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150\"\r\n                            placeholder=\"********\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    {message && (\r\n                        <div className={`p-3 rounded-lg text-center ${message.includes('exitoso') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n                            {message}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition duration-150\"\r\n                    >\r\n                        {loading ? (\r\n                            <svg className=\"animate-spin h-5 w-5 text-white mr-3\" viewBox=\"0 0 24 24\">\r\n                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                            </svg>\r\n                        ) : 'Iniciar Sesión'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;"],"names":[],"mappings":"AAAA,2BAA2B;AAC3B,6DAA6D;;;;;;AAG7D;AACA;AACA,kRAAyC,4DAA4D;AAJrG,cAAc,sCAAsC;;;;;AAMpD,MAAM,YAAY;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,IAAA,+JAAO;IACrC,MAAM,SAAS,IAAA,wKAAS;IAExB,oDAAoD;IACpD,IAAI,YAAY;QACX,8EAA8E;QAC9E,OAAO,IAAI,CAAC;QACZ,OAAO,MAAM,uCAAuC;IACzD;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,WAAW;QACX,WAAW;QAEX,MAAM,SAAS,MAAM,MAAM,OAAO;QAElC,WAAW;QACX,WAAW,OAAO,OAAO;QAEzB,IAAI,CAAC,OAAO,OAAO,EAAE;YACjB,iDAAiD;YACjD,WAAW,IAAM,WAAW,KAAK;QACrC;IACJ;IAEA,qBACI,qKAAC;QAAI,WAAU;kBACX,cAAA,qKAAC;YAAI,WAAU;;8BACX,qKAAC;oBAAG,WAAU;8BAAsD;;;;;;8BACpE,qKAAC;oBAAE,WAAU;;wBAAiC;sCAC5B,qKAAC;4BAAK,WAAU;sCAAgB;;;;;;sCAC9C,qKAAC;;;;;wBAAI;sCACW,qKAAC;4BAAK,WAAU;sCAAgB;;;;;;;;;;;;8BAGpD,qKAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,qKAAC;;8CACG,qKAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAChE,qKAAC;oCACG,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,QAAQ;oCACR,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAGpB,qKAAC;;8CACG,qKAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAChE,qKAAC;oCACG,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,QAAQ;oCACR,WAAU;oCACV,aAAY;;;;;;;;;;;;wBAInB,yBACG,qKAAC;4BAAI,WAAW,CAAC,2BAA2B,EAAE,QAAQ,QAAQ,CAAC,aAAa,gCAAgC,2BAA2B;sCAClI;;;;;;sCAIT,qKAAC;4BACG,MAAK;4BACL,UAAU;4BACV,WAAU;sCAET,wBACG,qKAAC;gCAAI,WAAU;gCAAuC,SAAQ;;kDAC1D,qKAAC;wCAAO,WAAU;wCAAa,IAAG;wCAAK,IAAG;wCAAK,GAAE;wCAAK,QAAO;wCAAe,aAAY;;;;;;kDACxF,qKAAC;wCAAK,WAAU;wCAAa,MAAK;wCAAe,GAAE;;;;;;;;;;;2EAEvD;;;;;;;;;;;;;;;;;;;;;;;AAM5B;uCAEe"}}]
}